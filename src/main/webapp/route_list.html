<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>黑马旅游-搜索</title>
    <link rel="stylesheet" type="text/css" href="css/common.css">
    <link rel="stylesheet" href="css/search.css">
    <script src="js/jquery-3.3.1.js"></script>
</head>
<body>
<!--引入头部-->
<div id="header"></div>
<div class="page_one">
    <div class="contant">
        <div class="crumbs">
            <img src="images/search.png" alt="">
            <p>黑马旅行><span>搜索结果</span></p>
        </div>
        <div class="xinxi clearfix">
            <div class="left">
                <div class="header">
                    <span>商品信息</span>
                    <span class="jg">价格</span>
                </div>
                <ul id="route_list">
                    <!--<li>
                        <div class="img"><img src="images/04-search_03.jpg" alt=""></div>
                        <div class="text1">
                            <p>【减100元 含除夕/春节出发】广州增城三英温泉度假酒店/自由行套票</p>
                            <br/>
                            <p>1-2月出发，网付立享￥1099/2人起！爆款位置有限，抢完即止！</p>
                        </div>
                        <div class="price">
                            <p class="price_num">
                                <span>&yen;</span>
                                <span>299</span>
                                <span>起</span>
                            </p>
                            <p><a href="route_detail.html">查看详情</a></p>
                        </div>
                    </li>-->

                </ul>
                <div class="page_num_inf">
                    <i></i> 共
                    <span>12</span>页<span>132</span>条
                </div>
                <div class="pageNum">
                    <ul id="paging_bar">
                        <!--<li><a href="">首页</a></li>
                        <li class="threeword"><a href="#">上一页</a></li>
                        <li><a href="#">1</a></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#">4</a></li>
                        <li><a href="#">5</a></li>
                        <li><a href="#">6</a></li>
                        <li><a href="#">7</a></li>
                        <li><a href="#">8</a></li>
                        <li><a href="#">9</a></li>
                        <li><a href="#">10</a></li>
                        <li class="threeword"><a href="javascript:;">下一页</a></li>
                        <li class="threeword"><a href="javascript:;">末页</a></li>-->
                    </ul>
                </div>
            </div>
            <div class="right">
                <div class="top">
                    <div class="hot">HOT</div>
                    <span>热门推荐</span>
                </div>
                <ul>
                    <li>
                        <div class="left"><img src="images/04-search_09.jpg" alt=""></div>
                        <div class="right">
                            <p>清远新银盏温泉度假村酒店/自由行套...</p>
                            <p>网付价<span>&yen;<span>899</span>起</span>
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="left"><img src="images/04-search_09.jpg" alt=""></div>
                        <div class="right">
                            <p>清远新银盏温泉度假村酒店/自由行套...</p>
                            <p>网付价<span>&yen;<span>899</span>起</span>
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="left"><img src="images/04-search_09.jpg" alt=""></div>
                        <div class="right">
                            <p>清远新银盏温泉度假村酒店/自由行套...</p>
                            <p>网付价<span>&yen;<span>899</span>起</span>
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="left"><img src="images/04-search_09.jpg" alt=""></div>
                        <div class="right">
                            <p>清远新银盏温泉度假村酒店/自由行套...</p>
                            <p>网付价<span>&yen;<span>899</span>起</span>
                            </p>
                        </div>
                    </li>
                    <li>
                        <div class="left"><img src="images/04-search_09.jpg" alt=""></div>
                        <div class="right">
                            <p>清远新银盏温泉度假村酒店/自由行套...</p>
                            <p>网付价<span>&yen;<span>899</span>起</span>
                            </p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<script src="js/getParameter.js"></script>

<!--引入头部-->
<div id="footer"></div>
<!--导入布局js，共享header和footer-->
<script type="text/javascript" src="js/include.js"></script>
</body>
<script>
    var cid = getParameter("cid")

    function getRouteinfo(page) {
        var search_value = $('#search_value').val() == undefined ? "" : $('#search_value').val();

        $.ajax({
            url: "/route?method=findRouteByPage&cid=" + cid + "&currentPage=" + page + "&searchWord=" + search_value,
            dataType: "json",
            success: function (res) {
                //遍历route分类列表
                $('#route_list').empty(); //设置内容前先清空数据
                var routeList = res.routeList;
                for (var i = 0; i < routeList.length; i++) {
                    var $li = $("<li>\n" +
                        "                            <div class=\"img\"><img src=\"" + routeList[i].rimage + "\" alt=\"\"></div>\n" +
                        "                            <div class=\"text1\">\n" +
                        "                                <p>" + routeList[i].rname + "</p>\n" +
                        "                                <br/>\n" +
                        "                                <p>" + routeList[i].routeIntroduce + "</p>\n" +
                        "                            </div>\n" +
                        "                            <div class=\"price\">\n" +
                        "                                <p class=\"price_num\">\n" +
                        "                                    <span>&yen;</span>\n" +
                        "                                    <span>" + routeList[i].price + "</span>\n" +
                        "                                    <span>起</span>\n" +
                        "                                </p>\n" +
                        "                                <p><a href=\"route_detail.html?rid=" + routeList[i].rid + "\">查看详情</a></p>\n" +
                        "                            </div>\n" +
                        "                        </li>");
                    $('#route_list').append($li);
                }
                //遍历route列表结束

                //分页信息设置
                $('.page_num_inf').empty();
                $('.page_num_inf').html("<i></i> 共\n" +
                    "                    <span>" + res.totalPage + "</span>页<span>" + res.totalCount + "</span>条")

                //设置分页条信息
                var $pagingBar = $('#paging_bar');
                $pagingBar.empty();
                $pagingBar.append("<li><a href=\"javascript:;\" onclick='getRouteinfo(1)'>首页</a></li>")
                //设置上一页
                if (res.currentPage > 1) {
                    $pagingBar.append("<li class=\"threeword\" ><a href=\"javascript:;\" onclick='getRouteinfo(" + res.prePage + ")'>上一页</a></li>")
                }
                //设置分页条
                for (var i = res.startPage; i <= res.endPage; i++) {
                    var $li_page = $("<li><a href=\"javascript:;\" onclick='getRouteinfo(" + i + ")'>" + i + "</a></li>");
                    if (i == res.currentPage) {
                        $li_page.addClass("curPage")
                    }
                    $pagingBar.append($li_page);
                }
                //设置下一页
                if (res.currentPage < res.totalPage) {
                    $pagingBar.append("<li class=\"threeword\"><a href=\"javascript:;\" onclick='getRouteinfo(" + res.nextPage + ")'>下一页</a></li>")
                }
                $pagingBar.append("<li class=\"threeword\"><a href=\"javascript:;\" onclick='getRouteinfo(" + res.totalPage + ")'>末页</a></li>")
            }
        });
    }

    getRouteinfo(1)
</script>
</html>